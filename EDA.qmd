---
title: "Exploratory Data Analysis"
format: html
editor: visual
---

## Introduction

For this project, I will be exploring a dataset that contains binary information related to diabetes. This data comes from a survey with 253,680 responses, and I am primarily interested in investigating whether the presence of diabetes can be predicted based off of other health/personal factors. The response variable is Diabetes_binary, which is a 0 if no diabetes, 1 if prediabetes, or 2 if diabetes. Other variables of interest include HighBP (binary marker for high blood pressure), HighChol (binary marker for high cholesterol), BMI, Smoker (binary marker for smoking at least 100 cigarettes in your life or not), Sex (0 = female, 1 = male), and Age (according to a factored level). In this EDA, I intend to explore initial relationships between a select number of these variables and the Diabetes factored indicator by observing plots and other exploratory analyses. After this initial data exploration, I will move on to modeling with the goal of creating a model that predicts whether a respondent will have diabetes according to certain variables with high accuracy.

## Data

### Importing the Data

```{r, message=FALSE, warning=FALSE}
library(tidyverse)
diab_data <- read_csv("diabetes_binary_health_indicators_BRFSS2015.csv")
diab_data <- diab_data |>
  #Converting a few variables of interest to factor
  mutate(Diabetes_binary = as_factor(Diabetes_binary),
         HighBP = as_factor(HighBP),
         HighChol = as_factor(HighChol),
         Smoker = as_factor(Smoker),
         Sex = as_factor(Sex),
         Age = as_factor(Age)
         ) |>
  #Removing any rows with NA
  drop_na()
```

## Summarizations

The variables I am most interested in exploring in this EDA are BMI, Age and HighBP. After doing some research on diabetes, I found that these factors are included in the CDC's Diabetes risk factors (https://www.cdc.gov/diabetes/risk-factors/index.html). Specifically, being overweight and being over the age of 45 are listed as factors that can influence if a person has diabetes, so I felt that BMI and Age were good factors to include to improve prediction. I also found that diabetes and high blood pressure often occur together, which is why I felt it was important to include that as another variable (https://www.hopkinsmedicine.org/health/conditions-and-diseases/diabetes/diabetes-and-high-blood-pressure).

First, I am going to explore how our diabetes binary variable is set up.

```{r}
table(diab_data$Diabetes_binary)
none <- sum(diab_data$Diabetes_binary == 0)/nrow(diab_data)
diabetes <- sum(diab_data$Diabetes_binary == 1)/nrow(diab_data)
c(none, diabetes)
```

We can see that about 86% of the total respondents of this survey did not have diabetes, whereas aroud 14% did have diabetes.

Next, I want to explore how many people in each age category had diabetes.

```{r}
table(diab_data$Diabetes_binary, diab_data$Age)
```

For those that do have diabetes, it definitely seems like there is some correlation between older age and having diabetes.

Next, looking at the binary variable for high blood pressure versus our diabetes variable.

```{r}
table(diab_data$Diabetes_binary, diab_data$HighBP)
```

We can see that the vast majority of respondents did not have high blood pressure or diabetes, however a large number of respondents with diabetes also had high blood pressure, indicating a relationship between the two as mentioned earlier.

Next, I want to explore the BMI variable.

```{r}
summary_bmi <- diab_data %>%
  summarise(
    mean_BMI = mean(BMI, na.rm = TRUE),
    sd_BMI = sd(BMI, na.rm = TRUE),
  )
print(summary_bmi)
```

We can see that the mean BMI is 28.38, with a standard deviation of 6.61. According to the CDC, this BMI corresponds to overweight for adults. However, since there is such high variability, we might have some outliers influencing this number.

Next, I would like to explore some visualizations of our variables. Starting with Age colored by diabetes.

```{r}
#Dist of diabetes
ggplot(diab_data, aes(x = Age, fill = Diabetes_binary)) +
  geom_bar() +
  labs(title = "Distribution of Diabetes Status", x = "Diabetes Status", y = "Count")
```

For our next graph, I want to look at the boxplots for BMI between the different values of our diabetes binary variable.

```{r}
#BMI by diabetes
ggplot(diab_data, aes(x = Diabetes_binary, y = BMI)) +
  geom_boxplot(fill = "red") +
  scale_x_discrete(labels = c("0" = "No Diabetes", "1" = "Diabetes")) +
  labs(title = "BMI by Diabetes Status", x = "Diabetes Status", y = "BMI")
```

As we can see, the BMI for Diabetes looks to be higher on average, though they do overlap. Both distributions contain a large amount of high outliers.

Now that we have finished an exploratory data analysis, we will move on to the Modeling portion and attempt to predict the binary diabetes variable using the three variable outlined here.

[Click here for the EDA Page](EDA.html)
